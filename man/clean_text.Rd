% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/01_pre_post_processing.R
\name{clean_text}
\alias{clean_text}
\title{Clean and Normalize Text}
\usage{
clean_text(
  x,
  text_col = "text",
  id_col = NULL,
  group_col = NULL,
  replace_emojis = TRUE,
  replace_alphaless = TRUE,
  max_char = 2000,
  tokenize_sentences = TRUE,
  max_words = 30,
  return_string = FALSE,
  verbose = TRUE
)
}
\arguments{
\item{x}{Character vector or data.frame containing texts to clean.}

\item{text_col}{Character, name of the text column if \code{x} is a data.frame.
Ignored if \code{x} is a character vector. Default = "text".}

\item{id_col}{Character, optional column name in the input data.frame to
preserve as an identifier column named \code{doc_id_u}. Default = NULL.}

\item{group_col}{Character, optional column name in the input data.frame
to preserve as a grouping variable column named \code{group}. Default = NULL.}

\item{replace_emojis}{Logical, whether to replace emojis with placeholder
names. Default = TRUE.}

\item{replace_alphaless}{Logical, whether to replace strings that contain no
alphabetic characters with empty strings. Default = TRUE.}

\item{max_char}{Integer, maximum number of characters per text. Texts longer
than this are truncated. Default = 2000.}

\item{tokenize_sentences}{Logical, whether to split texts with more than
3 sentences into individual sentences. Default = TRUE.}

\item{max_words}{Integer, maximum number of words per sentence or chunk.
Long sentences are split into chunks of this size. Default = 30.}

\item{return_string}{Logical, if TRUE, return only the cleaned character
vector (\code{text_clean}) instead of a full data.table. Default = FALSE.}

\item{verbose}{Logical, whether to print progress messages. Default = TRUE.}
}
\value{
Either:
\itemize{
\item A data.table with the columns described above.
\item Or a character vector of cleaned texts if \code{return_string = TRUE}.
}
}
\description{
Cleans and optionally tokenizes raw text data. Handles emoji replacement,
removal of unsupported characters, number and punctuation normalization,
trimming, squishing whitespace, and limiting text length. Returns either
a standardized data.table or a character vector.
}
\details{
The returned data.table contains the following columns in fixed order:
\itemize{
\item \code{sen_id}: Unique identifier for each sentence row, constructed
as \code{<doc_idx>_<sen_idx>}.
\item \code{doc_idx}: Row index of the original document in the input.
\item \code{sen_idx}: Sentence/chunk index within each document.
\item \code{doc_id_u}: Optional user-provided identifier, if \code{id_col} is given.
\item \code{group}: Optional grouping column, if \code{group_col} is given.
\item \code{text_orig}: Original text before cleaning.
\item \code{text_clean}: Cleaned and normalized text.
}
}
